binary_sensor:
  - platform: mqtt
    state_topic: "r433/bedlamp/switch"
    name: r433_bedlamp_state
    payload_on: "on"
    payload_off: "off"
    device_class: light

  # - name: r433_bedlamp_state
  #   platform: command_line
  #   command: "curl -X GET --silent --header 'Accept: application/json' 'http://rpi-433rc:5000/devices/bedlamp'"
  #   device_class: light
  #   value_template: '{{value_json.state}}'
  #   payload_on: 'on'
  #   payload_off: 'off'
  #   scan_interval: 5

switch:
  - platform: template
    switches:
      r433_bedlamp:
        value_template: "{{ is_state('binary_sensor.r433_bedlamp_state', 'on') }}"
        turn_on:
          service: rest_command.r433_switch_on
          data:
            device_name: bedlamp
        turn_off:
          service: rest_command.r433_switch_off
          data:
            device_name: bedlamp
        icon_template: mdi:track-light
