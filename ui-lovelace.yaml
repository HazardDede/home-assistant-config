title: Smarthome

resources:
  - url: /local/lovelace/group-card.js?v=1
    type: js
  - url: /local/lovelace/monster-card.js?v=1
    type: js
  - url: /local/lovelace/card-tools.js?v=2
    type: js
  - url: /local/lovelace/secondaryinfo-entity-row.js?v=2
    type: module
  - url: /local/lovelace/plant-sensor-card.js?v=1
    type: module
  - url: /local/lovelace/compact-custom-header.js?v=0.0.1
    type: module

views:
  - title: Home
    icon: mdi:home
    id: home
    background: var(--background-image)
    badges:
      - device_tracker.dennis
      - device_tracker.jennifer
    cards:
      - type: custom:compact-custom-header
        main_config: True
        background_image: True
        notifications: show
        voice: overflow
        options: clock
        clock_format: 24
        clock_am_pm: False
      - id: home_tracker
        type: entities
        entities:
          - sensor.jennifer_status
          - sensor.dennis_status
      - id: home_living
        type: entities
        title: "Living room"
        show_header_toggle: False
        entities:
          - sensor.device_dht01_temperature
          - sensor.zway_device_7_temperature
          - sensor.zway_device_7_illumination
          - entity: scene.living_cinematic
            name: Cinematic
          - entity: binary_sensor.zway_device_7
            name: "Hallway: Motion"
          - entity: binary_sensor.device_raspitouch_motion
            name: "Raspitouch: Motion"
          - entity: switch.zway_device_4
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.zway_device_4_power.state ]] W"
          - entity: switch.zway_device_5
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.zway_device_5_power.state ]] W"
          - entity: switch.zway_device_17
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.zway_device_17_power.state ]] W"
          - light.zway_device_22
          - entity: switch.zway_device_20
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.zway_device_20_power.state ]] W"
      - id: home_krymmel
        type: entities
        title: "Krymmel's End"
        show_header_toggle: False
        entities:
          - sensor.zway_device_24_temperature
          - sensor.zway_device_24_illumination
          - binary_sensor.zway_device_24
          - entity: switch.zway_device_13
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.zway_device_13_power.state ]] W"
      - id: home_bedroom
        type: entities
        title: "Bedroom"
        show_header_toggle: False
        entities:
          - sensor.zway_device_23_temperature
          - sensor.zway_device_23_illumination
          - binary_sensor.zway_device_23
          - entity: switch.zway_device_21
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.zway_device_21_power.state ]] W"
          - switch.r433_bedlamp
      - id: home_peanut
        type: vertical-stack
        cards:
          - id: home_peanut_glance
            type: picture-glance
            title: "Peanut's Playground"
            entities:
              - binary_sensor.zway_device_19
              - switch.r433_moon
              - switch.r433_miffy
            image: /local/rooms/peanut.jpg
            aspect_ratio: "16:9"
          - id: home_peanut_info
            type: entities
            entities:
              - entity: binary_sensor.zway_device_19
                name: Motion
              - entity: sensor.zway_device_19_temperature
                name: Temperature
              - entity: sensor.zway_device_19_illumination
                name: Luminescence
  - title: Home Health
    id: health
    icon: mdi:heart-pulse
    background: var(--background-image)
    cards:
      - type: custom:compact-custom-header
      - id: health_alert
        type: custom:monster-card
        show_empty: False
        filter:
          include:
            - domain: alert
          exclude:
            - state: "idle"
        card: 
          type: entities
          title: Alerts
          show_header_toggle: False
      - id: health_battery
        type: custom:monster-card
        show_empty: False
        card:
          type: glance
          title: "Batteries"
        filter:
          include:
            - entity_id: "sensor.*_battery"
              state: "< 25"
      - id: health_jennifer
        title: "Jennifer"
        type: entities
        show_header_toggle: False
        entities:
          - entity: sensor.fitbit_jennifer_distance
            name: Distance (today)
          - entity: sensor.fitbit_jennifer_water
            name: Hydration (today)
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "Goal: [[ sensor.fitbit_jennifer_water_goal.state ]] ml"
          - entity: sensor.fitbit_jennifer_versa_battery
            name: "Versa: battery level"
          - entity: sensor.fitbit_jennifer_versa_lastsync_mins
            name: "Versa: Last sync"
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.fitbit_jennifer_versa_lastsync.state ]]"
      - id: health_dennis
        title: "Dennis"
        type: entities
        show_header_toggle: False
        entities:
          - entity: sensor.fitbit_dennis_distance
            name: Distance (today)
          - entity: sensor.fitbit_dennis_water
            name: Hydration (today)
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "Goal: [[ sensor.fitbit_dennis_water_goal.state ]] ml"
          - entity: sensor.fitbit_dennis_blaze_battery
            name: "Blaze: battery level"
          - entity: sensor.fitbit_dennis_blaze_lastsync_mins
            name: "Blaze: Last sync"
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.fitbit_dennis_blaze_lastsync.state ]]"
      - id: health_wastebin
        title: Trash
        type: entities
        show_header_toggle: False
        entities:
          - entity: sensor.gelber_sack
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.gelber_sack.attributes.friendly_delta ]]"
          - entity: sensor.biotonne
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.biotonne.attributes.friendly_delta ]]"
          - entity: sensor.papiertonne
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.papiertonne.attributes.friendly_delta ]]"
          - entity: sensor.restabfall_2wo
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.restabfall_2wo.attributes.friendly_delta ]]"
      - id: health_pumbaa
        type: entities
        title: "Pumbaa"
        show_header_toggle: False
        entities:
          - entity: input_boolean.pumbaa_nightly_run
            name: "Nightly Run"
          - entity: vacuum.pumbaa
            name: "Controls"
            icon: mdi:pig
          - entity: sensor.pumbaa_battery
            name: "Battery"
          - entity: sensor.pumbaa_running_time
            name: Running time since last cleanup
            icon: mdi:timer-sand
          - entity: binary_sensor.pumbaa_bin_full
            name: Check the bin
            icon: mdi:delete-circle
          - input_datetime.pumbaa_last_bin_cleaning
          - entity: script.pumbaa_set_bin_clean
            name: "Cleaned the bin"
            icon: mdi:delete-outline
  - title: Climate
    id: climate
    icon: mdi:thermometer-lines
    background: var(--background-image)
    badges:
      - sensor.weather_symbol
      - sensor.device_dht01_humidity
    cards:
      - type: custom:compact-custom-header
      - id: climate_exterior
        type: entities
        title: Elmshorn
        show_header_toggle: False
        entities:
          - binary_sensor.vacation_hh
          - binary_sensor.vacation_sh
          - sun.sun
          - sensor.moon
          - sensor.weather_cloudiness
      - id: climate_exterior_forecast
        type: weather-forecast
        entity: weather.dark_sky
      - id: climate_control
        type: entities
        title: Climate Controller
        show_header_toggle: False
        entities:
          - input_select.heating_mode
          - input_boolean.splash_time
      - id: climate_ground
        type: vertical-stack
        cards:
          - id: climate_ground_temp
            type: history-graph
            title: "Ground floor (°C)"
            refresh_interval: 10
            entities:
              - sensor.device_dht01_temperature
              - sensor.zway_device_7_temperature
              - sensor.bath_downstairs_setpoint
              - sensor.living_setpoint
          - id: climate_ground_setpoints
            type: entities
            entities:
              - input_number.zway_device_12
              - input_number.zway_device_6
      - id: climate_first
        type: vertical-stack
        cards:
          - id: climate_first_temp
            type: history-graph
            title: "First floor (°C)"
            refresh_interval: 10
            entities:
              - sensor.zway_device_24_temperature
              - sensor.zway_device_19_temperature
              - sensor.zway_device_23_temperature
              - sensor.living_setpoint
              - sensor.nursery_setpoint
              - sensor.bath_upstairs_setpoint
          - id: climate_first_setpoints
            type: entities
            entities:
              - input_number.zway_device_9
              - input_number.zway_device_8
              - input_number.zway_device_11
  - title: flower
    id: flower
    icon: mdi:flower-outline
    background: var(--background-image)
    cards:
      - type: custom:compact-custom-header
      - type: picture-elements
        id: flower_miflora_01
        image: /local/plants/pfeilblatt.jpg?v=1
        elements:
          - type: custom:plant-sensor-card
            entity: sensor.miflora_01_moisture
            max: 60
            min: 15
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 10%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_01_conductivity
            max: 2000
            min: 350
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 25%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_01_light_intensity
            max: 6000
            min: 1500
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 40%
              width: 3em
              height: 3em
          - type: image
            entity: plant.miflora_01
            image: "/local/icons/check.png?v=1"
            state_image:
              "ok": /local/icons/check.png?v=1
              "problem": /local/icons/problem.png?v=1
            style:
              top: 90%
              left: 5%
              width: 2em
          - type: image
            entity: sensor.miflora_01_battery_status
            image: "/local/icons/battery_high.png?v=1"
            state_image:
              "high": /local/icons/battery_high.png?v=1
              "medium": /local/icons/battery_medium.png?v=1
              "low": /local/icons/battery_low.png?v=1
            style:
              top: 90%
              left: 93%
              width: 3em
          - type: state-label
            entity: sensor.miflora_01_battery
            style:
              top: 90%
              left: 93%
              color: black
              font-size: 0.7em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_01_temperature
            style:
              top: 10%
              left: 93%
              color: grey
              --ha-label-badge-font-size: 1em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_01_last_updated
            style:
              top: 19%
              left: 89%
              color: grey
              --ha-label-badge-font-size: 1em
              font-weight: bold
      - type: picture-elements
        id: flower_miflora_02
        image: /local/plants/calathea.jpg?v=1
        elements:
          - type: custom:plant-sensor-card
            entity: sensor.miflora_02_moisture
            max: 65
            min: 15
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 10%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_02_conductivity
            max: 1000
            min: 350
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 25%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_02_light_intensity
            max: 20000
            min: 800
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 40%
              width: 3em
              height: 3em
          - type: image
            entity: plant.miflora_02
            image: "/local/icons/check.png?v=1"
            state_image:
              "ok": /local/icons/check.png?v=1
              "problem": /local/icons/problem.png?v=1
            style:
              top: 90%
              left: 5%
              width: 2em
          - type: image
            entity: sensor.miflora_02_battery_status
            image: "/local/icons/battery_high.png?v=1"
            state_image:
              "high": /local/icons/battery_high.png?v=1
              "medium": /local/icons/battery_medium.png?v=1
              "low": /local/icons/battery_low.png?v=1
            style:
              top: 90%
              left: 93%
              width: 3em
          - type: state-label
            entity: sensor.miflora_02_battery
            style:
              top: 90%
              left: 93%
              color: black
              font-size: 0.7em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_02_temperature
            style:
              top: 10%
              left: 93%
              color: white
              --ha-label-badge-font-size: 1em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_02_last_updated
            style:
              top: 19%
              left: 89%
              color: grey
              --ha-label-badge-font-size: 1em
              font-weight: bold
      - type: picture-elements
        id: flower_miflora_03
        image: /local/plants/ficus_elastica.jpg?v=1
        elements:
          - type: custom:plant-sensor-card
            entity: sensor.miflora_03_moisture
            max: 60
            min: 15
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 10%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_03_conductivity
            max: 2000
            min: 350
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 25%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_03_light_intensity
            max: 30000
            min: 1000
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 40%
              width: 3em
              height: 3em
          - type: image
            entity: plant.miflora_03
            image: "/local/icons/check.png?v=1"
            state_image:
              "ok": /local/icons/check.png?v=1
              "problem": /local/icons/problem.png?v=1
            style:
              top: 90%
              left: 5%
              width: 2em
          - type: image
            entity: sensor.miflora_03_battery_status
            image: "/local/icons/battery_high.png?v=1"
            state_image:
              "high": /local/icons/battery_high.png?v=1
              "medium": /local/icons/battery_medium.png?v=1
              "low": /local/icons/battery_low.png?v=1
            style:
              top: 90%
              left: 93%
              width: 3em
          - type: state-label
            entity: sensor.miflora_03_battery
            style:
              top: 90%
              left: 93%
              color: black
              font-size: 0.7em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_03_temperature
            style:
              top: 10%
              left: 93%
              color: white
              --ha-label-badge-font-size: 1em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_03_last_updated
            style:
              top: 19%
              left: 89%
              color: grey
              --ha-label-badge-font-size: 1em
              font-weight: bold
      - type: picture-elements
        id: flower_miflora_04
        image: /local/plants/monstera.jpg?v=1
        elements:
          - type: custom:plant-sensor-card
            entity: sensor.miflora_04_moisture
            max: 60
            min: 15
            stroke_width: 15
            fill: '#444547'
            font_style:
              color: '#f2efef'
            style:
              top: 35%
              left: 92%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_04_conductivity
            max: 2000
            min: 350
            stroke_width: 15
            fill: '#444547'
            font_style:
              color: '#f2efef'
            style:
              top: 50%
              left: 77%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_04_light_intensity
            max: 15000
            min: 800
            stroke_width: 15
            fill: '#444547'
            font_style:
              color: '#f2efef'
            style:
              top: 65%
              left: 92%
              width: 3em
              height: 3em
          - type: image
            entity: plant.miflora_04
            image: "/local/icons/check.png?v=1"
            state_image:
              "ok": /local/icons/check.png?v=1
              "problem": /local/icons/problem.png?v=1
            style:
              top: 90%
              left: 5%
              width: 2em
          - type: image
            entity: sensor.miflora_04_battery_status
            image: "/local/icons/battery_high.png?v=1"
            state_image:
              "high": /local/icons/battery_high.png?v=1
              "medium": /local/icons/battery_medium.png?v=1
              "low": /local/icons/battery_low.png?v=1
            style:
              top: 90%
              left: 92%
              width: 3em
          - type: state-label
            entity: sensor.miflora_04_battery
            style:
              top: 90%
              left: 92%
              color: black
              font-size: 0.7em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_04_temperature
            style:
              top: 10%
              left: 93%
              color: white
              --ha-label-badge-font-size: 1em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_04_last_updated
            style:
              top: 19%
              left: 89%
              color: grey
              --ha-label-badge-font-size: 1em
              font-weight: bold
      - type: picture-elements
        id: flower_miflora_05
        image: /local/plants/ficus_lyrata.jpg?v=1
        elements:
          - type: custom:plant-sensor-card
            entity: sensor.miflora_05_moisture
            max: 60
            min: 15
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 10%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_05_conductivity
            max: 2000
            min: 350
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 25%
              width: 3em
              height: 3em
          - type: custom:plant-sensor-card
            entity: sensor.miflora_05_light_intensity
            max: 45000
            min: 1500
            stroke_width: 15
            fill: black
            font_style:
              color: '#f2efef'
            style:
              top: 20%
              left: 40%
              width: 3em
              height: 3em
          - type: image
            entity: plant.miflora_05
            image: "/local/icons/check.png?v=1"
            state_image:
              "ok": /local/icons/check.png?v=1
              "problem": /local/icons/problem.png?v=1
            style:
              top: 90%
              left: 5%
              width: 2em
          - type: image
            entity: sensor.miflora_05_battery_status
            image: "/local/icons/battery_high.png?v=1"
            state_image:
              "high": /local/icons/battery_high.png?v=1
              "medium": /local/icons/battery_medium.png?v=1
              "low": /local/icons/battery_low.png?v=1
            style:
              top: 90%
              left: 93%
              width: 3em
          - type: state-label
            entity: sensor.miflora_05_battery
            style:
              top: 90%
              left: 93%
              color: black
              font-size: 0.7em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_05_temperature
            style:
              top: 10%
              left: 93%
              color: grey
              --ha-label-badge-font-size: 1em
              font-weight: bold
          - type: state-label
            entity: sensor.miflora_05_last_updated
            style:
              top: 19%
              left: 89%
              color: grey
              --ha-label-badge-font-size: 1em
              font-weight: bold

  # - title: Power
  #   id: power
  #   icon: mdi:flash-circle
  #   cards:
  #     - id: power_consumption
  #       type: vertical-stack
  #       cards:
  #         - type: custom:monster-card
  #           id: power_consumption_entities
  #           show_empty: False
  #           card:
  #             type: entities
  #             title: "Consumption"
  #             show_header_toggle: False
  #           filter:
  #             include:
  #               - entity_id: "sensor.*_consumption"
  #         - id: power_consumption_graph
  #           type: custom:monster-card
  #           show_empty: False
  #           card:
  #             type: history-graph
  #             refresh_interval: 10
  #           filter:
  #             include:
  #               - entity_id: "sensor.*_consumption"
  #     - id: power_power
  #       type: vertical-stack
  #       cards:
  #         - type: custom:monster-card
  #           id: power_power_entities
  #           show_empty: False
  #           card:
  #             type: entities
  #             title: "Power"
  #             show_header_toggle: False
  #           filter:
  #             include:
  #               - entity_id: "sensor.*_power"
  #         - id: power_power_graph
  #           type: custom:monster-card
  #           show_empty: False
  #           card:
  #             type: history-graph
  #             refresh_interval: 10
  #           filter:
  #             include:
  #               - entity_id: "sensor.*_power"
  - title: Monitoring
    id: monitoring
    icon: mdi:desktop-classic
    background: var(--background-image)
    # badges:
    #   - sensor.speedtest_download
    #   - sensor.speedtest_upload
    #   - sensor.speedtest_ping
    cards:
      - type: custom:compact-custom-header
      - id: mon_system
        type: entities
        title: System
        show_header_toggle: False
        entities:
          - sensor.processor_use
          - sensor.cpu_temp
          - sensor.memory_use_percent
          - sensor.disk_use_percent
          - sensor.swap_use_percent
          - sensor.load_1m
          - sensor.load_5m
          - sensor.load_15m
          - sensor.last_boot
      # - id: mon_net
      #   type: entities
      #   title: Network
      #   entities:
      #     - sensor.fritz_netmonitor
      #     - sensor.net_external_ip
      #     - sensor.net_rate_down
      #     - sensor.net_rate_up
      #     - sensor.net_rate_down_max
      #     - sensor.net_rate_up_max
      # - id: mon_server
      #   type: entities
      #   title: Server
      #   show_header_toggle: False
      #   entities:
      #     - binary_sensor.fritz_ping
      #     - binary_sensor.mediaserver_ping
      #     - binary_sensor.hp_printer_ping
      #     - binary_sensor.zway_ping
  - title: CCTV
    id: cctv
    icon: mdi:cctv
    background: var(--background-image)
    cards:
      - type: custom:compact-custom-header
      - type: picture-entity
        id: cctv_motion01
        entity: camera.motion01
        show_name: False
        show_state: False
  - title: Settings
    id: settings
    icon: mdi:settings-outline
    background: var(--background-image)
    cards:
      - type: custom:compact-custom-header
      - type: entities
        id: settings_theme
        title: Themes
        entities:
          - input_select.frontend_theme
          - input_boolean.frontend_theme_day_night_switch
      - id: settings_guest_wifi
        type: vertical-stack
        cards:
          - id: settings_guest_wifi_info
            type: markdown
            title: Guest Wifi
            content: >
              SSID: **Humletorp Gastzugang**
              
              Key: **welcome1!**
          - id: settings_guest_wifi_button
            type: entities
            entities:
              - input_boolean.guestwifi
      - type: custom:group-card
        id: settings_all_automations
        card:
          type: entities
          title: Automations
          show_header_toggle: False
        group: group.all_automations
